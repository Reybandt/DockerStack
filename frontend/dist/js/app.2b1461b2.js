(function(t){function e(e){for(var a,s,o=e[0],l=e[1],c=e[2],u=0,d=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);p&&p(e);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function s(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"dbbbce1e"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=r[t]=[e,a]}));e.push(n[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=s(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,n[1](c)}r[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var p=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"045a":function(t,e,n){},3169:function(t,e,n){"use strict";var a=n("d0de"),r=n.n(a);r.a},"32e7":function(t,e,n){"use strict";var a=n("cb8d"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("NavBar"),n("router-view")],1)},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("SkySurface")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"Home"}}},[t._v("Главная"),a("span",{staticClass:"sr-only"},[t._v("(current)")])])],1),a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Фильтры ")]),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.getFlightsWithAvailableSeats()}}},[t._v("Рейсы только со свободными местами")]),a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.getFlightsWithoutTransfer()}}},[t._v("Рейсы без пересадок")]),a("div",{staticClass:"dropdown-divider"}),a("p",{staticClass:"ml-4"},[t._v("Авиакомпании:")]),t._l(t.airline_companies,(function(e){return a("div",{staticClass:"ml-4",attrs:{id:"checkboxes"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.airlineCategories,expression:"airlineCategories"}],staticClass:"ml-2 mr-2",attrs:{type:"checkbox"},domProps:{value:e.name,checked:Array.isArray(t.airlineCategories)?t._i(t.airlineCategories,e.name)>-1:t.airlineCategories},on:{change:[function(n){var a=t.airlineCategories,r=n.target,i=!!r.checked;if(Array.isArray(a)){var s=e.name,o=t._i(a,s);r.checked?o<0&&(t.airlineCategories=a.concat([s])):o>-1&&(t.airlineCategories=a.slice(0,o).concat(a.slice(o+1)))}else t.airlineCategories=i},function(e){return t.getFlightsAccordingToCompany()}]}}),a("label",[t._v(t._s(e.name))]),a("br")])}))],2)])]),t.auth?a("span",{staticClass:"button mr-5"},[a("a",{staticStyle:{color:"black","font-size":"15px"},attrs:{href:"#"},on:{click:function(e){return t.goToProfile()}}},[a("img",{staticClass:"mr-1",attrs:{src:n("f02b"),alt:"Личный кабинет",width:"35",height:"35"}}),t._v(" Личный кабинет ")]),a("button",{staticClass:"btn btn-danger ml-3",on:{click:function(e){return t.logout()}}},[t._v("Выход")])]):a("span",{staticClass:"button mr-5"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.goLogin()}}},[t._v("Войти")]),a("button",{staticClass:"btn btn-light ml-2",on:{click:function(e){return t.goToRegistration()}}},[t._v("Зарегистрироваться")])])])])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[n("span",{staticClass:"navbar-toggler-icon"})])}],l={name:"NavBar",data:function(){return{airlineCategories:["Utair","S7"]}},computed:{auth:function(){var t=this.$store.state.profile;return t&&t.first_name},airline_companies:function(){return this.$store.state.airline_companies}},created:function(){this.loadAirlineCompanies()},methods:{getFlightsWithAvailableSeats:function(){this.$store.dispatch("getFlights",{withAvailableSeats:1})},getFlightsWithoutTransfer:function(){this.$store.dispatch("getFlights",{withoutTransfer:!1})},getFlightsAccordingToCompany:function(){this.$store.dispatch("getFlights",{airlineCompanies:0!=this.airlineCategories.length?this.airlineCategories:null})},goLogin:function(){this.$router.push({name:"Login"})},goToProfile:function(){this.$router.push({name:"Profile"})},goToRegistration:function(){this.$router.push({name:"Registration"})},logout:function(){localStorage.removeItem("token"),this.$store.commit("setProfile",{}),this.$router.push({name:"Home"})},loadAirlineCompanies:function(){this.$store.dispatch("getAirlineCompanies")}}},c=l,u=(n("32e7"),n("2877")),p=Object(u["a"])(c,s,o,!1,null,"426a6250",null),d=p.exports,f={components:{NavBar:d},created:function(){var t=localStorage.getItem("token"),e=localStorage.getItem("id");t&&this.$store.dispatch("loadProfile",{token:t,id:e}).catch((function(t){console.log("error",t)}))}},m=f,v=Object(u["a"])(m,r,i,!1,null,"24e67885",null),_=v.exports,h=(n("d3b7"),n("8c4f")),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-part"},[t._m(0),n("div",{staticClass:"container"},t._l(t.flights,(function(e){return n("div",{key:e.id,staticClass:"card mb-3"},[n("h5",{staticClass:"card-header"},[t._v("Рейс № "+t._s(e.flight_number)+" авиакомпании "+t._s(e.airplane.airline_company))]),n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(" "+t._s(e.departure_point)+" --\x3e "+t._s(e.destination)+" ")]),n("p",[n("b",[t._v("Дата и время вылета:")]),t._v(" "+t._s(e.departure_time)+". "),n("b",[t._v("Дата и время прибытия:")]),t._v(" "+t._s(e.destination_time)+". "),n("b",[t._v("Длительность полета:")]),t._v(" "+t._s(e.duration)+" ")]),n("p",[n("b",[t._v("Количество проданных билетов/общее количество мест:")]),t._v(" "+t._s(e.number_of_tickets_sold)+"/"+t._s(e.number_of_seats)+".")]),n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"Single",params:{id:e.id}}}},[t._v("Подробнее")])],1)])})),0)])},b=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mb-4 mt-4"},[n("h2",[t._v("Список рейсов")])])}],C={name:"Home",data:function(){return{}},components:{},computed:{flights:function(){return this.$store.state.flights}},created:function(){this.loadFlights()},methods:{loadFlights:function(){this.$store.dispatch("getFlights")}}},w=C,y=(n("3169"),Object(u["a"])(w,g,b,!1,null,"d71a38e2",null)),x=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",[n("h2",{staticClass:"mt-4 mb-3"},[t._v("Авторизация")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"login"}},[t._v("Логин")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{id:"login",type:"text",placeholder:"Введите логин"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Пароль")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"Введите пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{staticClass:"btn btn-primary",on:{click:t.setLogin}},[t._v("Войти")])])])},S=[],$=n("1157"),j=n.n($),O={name:"Login",data:function(){return{login:"",password:""}},methods:{setLogin:function(){var t=this;j.a.ajax({url:"http://127.0.0.1:8000/api/v1/flight/accounts/login/",type:"POST",data:{username:this.login,password:this.password},success:function(e){localStorage.setItem("token",e.token),localStorage.setItem("id",e.user_id),t.$router.push({name:"Profile"})},error:function(t){400===t.status&&alert("Введен неверный логин или пароль.")}})}}},F=O,P=Object(u["a"])(F,k,S,!1,null,"a57a5fe6",null),T=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-4"},[n("h2",[t._v("Информация о рейсе № "+t._s(t.flight.flight_number))]),n("ul",{staticClass:"mt-4"},[n("li",[t._v("Пункт вылета: "),n("b",[t._v(t._s(t.flight.departure_point))])]),n("li",[t._v("Пункт назначения: "),n("b",[t._v(t._s(t.flight.destination))])]),n("li",[t._v("Дистанция: "),n("b",[t._v(t._s(t.flight.distance)+" км")])]),t.flight.airplane?n("li",[t._v("Авиакомпания: "),n("b",[t._v(t._s(t.flight.airplane.airline_company))])]):t._e(),n("li",[t._v("Дата и время вылета: "),n("b",[t._v(t._s(t.flight.departure_time))])]),n("li",[t._v("Дата и время прибытия: "),n("b",[t._v(t._s(t.flight.destination_time))])]),n("li",[t._v("Общее количество мест: "),n("b",[t._v(t._s(t.flight.number_of_seats))])]),n("li",[t._v("Количество проданных билетов: "),n("b",[t._v(t._s(t.flight.number_of_tickets_sold))])]),n("hr"),t.flight.transit_landings?n("li",[t._v("Прямой: "),n("b",[t._v("нет")])]):t._e(),t.flight.transit_landings?n("li",[t._v("Время транзитных посадок: "),n("b",[t._v(t._s(t.flight.transit_departure_time))])]):t._e(),t.flight.transit_landings?n("li",[t._v("Время транзитных вылетов: "),n("b",[t._v(t._s(t.flight.transit_destination_time))])]):t._e(),!1===t.flight.transit_landings?n("li",[t._v("Прямой: "),n("b",[t._v("да")])]):t._e(),n("hr"),t.flight.airplane?n("li",[t._v("Самолет: "),n("b",[t._v(t._s(t.flight.airplane.type))])]):t._e(),n("li",[t._v("Экипаж:")]),t._l(t.flight.served_flight,(function(e){return n("p",{key:e.id},[t._v(" Главный пилот: "),n("b",[n("i",[t._v(t._s(e.head_pilot))])]),t._v(" "),n("br"),t._v(" Второй пилот: "),n("b",[n("i",[t._v(t._s(e.second_pilot))])]),t._v(" "),n("br"),t._v(" Стюардессы: "),n("b",[n("i",[t._v(t._s(e.stewardess1)+", "+t._s(e.stewardess2))])]),t._v(" "),n("br"),t._v(" Стюард: "),n("b",[n("i",[t._v(t._s(e.steward))])])])}))],2),n("div",{staticClass:"mt-5"},[n("button",{staticClass:"btn btn-secondary ml-4",on:{click:t.goBackToFlights}},[t._v("Назад")]),n("button",{staticClass:"btn btn-primary ml-4",class:t.buttonType,attrs:{id:"hintarea"},on:{"~click":function(e){return t.checkIn()}}},[t._v(" Записаться на рейс ")])])])},R=[],N=(n("99af"),n("96cf"),n("1da1")),E={name:"Single",props:["id"],data:function(){return{flight:{},indicator:!1}},created:function(){this.loadFlight()},computed:{auth:function(){var t=this.$store.state.profile;return t&&t.first_name},buttonType:function(){return{disabled:!this.auth||this.flight.number_of_seats-this.flight.number_of_tickets_sold<=0||this.indicator}},profile:function(){return this.$store.state.profile}},methods:{loadFlight:function(){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.$store.getters.getServerUrl,"/flight/").concat(t.id,"/")).then((function(t){return t.json()}));case 2:t.flight=e.sent;case 3:case"end":return e.stop()}}),e)})))()},goBackToFlights:function(){this.$router.push("/")},checkIn:function(){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={flight:[t.id]},a={number_of_tickets_sold:t.flight.number_of_tickets_sold+1},r=localStorage.getItem("token"),e.next=5,fetch("".concat(t.$store.getters.getServerUrl,"/flight/profile/").concat(t.profile.id,"/"),{method:"PUT",headers:{Authorization:"Token "+r,"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return e.next=7,fetch("".concat(t.$store.getters.getServerUrl,"/flight/").concat(t.id,"/"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){t.indicator=!0,console.log(t.indicator),alert("Вы успешно зарегистрированы на рейс!")})).catch((function(t){return t}));case 7:case"end":return e.stop()}}),e)})))()}}},L=E,U=(n("9708"),Object(u["a"])(L,A,R,!1,null,"9424683a",null)),I=U.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{staticClass:"mt-4"},[t._v("Профиль пользователя")]),n("div",[n("ul",{staticClass:"mt-4"},[n("li",[t._v("Имя: "),n("b",[t._v(t._s(t.profile.first_name)+" "+t._s(t.profile.last_name))])]),n("li",[t._v("Возраст: "),n("b",[t._v(t._s(t.profile.age))])]),"Пользователь сайта"!=t.profile.status?n("li",[t._v("Образование: "),n("b",[t._v(t._s(t.profile.education))])]):t._e(),n("li",[t._v("Паспортные данные: "),n("b",[t._v(t._s(t.profile.passport_number))])]),"Пользователь сайта"!=t.profile.status?n("li",[t._v("Должность: "),n("b",[t._v(t._s(t.profile.position))])]):t._e(),n("li",[t._v("Текущий статус: "),n("b",[t._v(t._s(t.profile.status))])])]),n("p",{staticClass:"mt-4 ml-3"},[n("button",{staticClass:"btn btn-light mr-4",attrs:{type:"button"},on:{click:function(e){(t.isFlight=!t.isFlight)&&(t.isVisible=!1)}}},[t._v(" Мои рейсы ")]),"Пользователь сайта"===t.profile.status?n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){(t.isVisible=!t.isVisible)&&(t.isFlight=!1)}}},[t._v(" Хочу работать у вас! ")]):t._e()])]),n("hr",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}]}),n("JobApplication",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}]}),t.profile.is_superuser?n("div",[n("hr"),n("h3",{staticClass:"mt-4"},[t._v("Список поданных заявок:")]),n("ApplicationList")],1):t._e(),n("hr",{directives:[{name:"show",rawName:"v-show",value:t.isFlight,expression:"isFlight"}]}),t._l(t.flights,(function(e){return t.profile.flight[0]===e.id?n("div",{directives:[{name:"show",rawName:"v-show",value:t.isFlight,expression:"isFlight"}]},[n("div",{staticClass:"card w-75"},[n("div",{staticClass:"card-body"},[n("h6",{staticClass:"card-title"},[t._v("Рейс № "+t._s(e.flight_number)+" авиакомпании "+t._s(e.airplane.airline_company))]),n("p",{staticClass:"card-text"},[n("b",[t._v(t._s(e.departure_point))]),t._v(" --\x3e "),n("b",[t._v(t._s(e.destination))])]),n("div",[n("small",[t._m(0,!0),t._v(" "+t._s(e.departure_time)+". "),t._m(1,!0),t._v(" "+t._s(e.destination_time)+". ")])])])])]):t._e()}))],2)},q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b",[n("i",[t._v("Дата и время вылета:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b",[n("i",[t._v("Дата и время прибытия:")])])}],V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h3",[t._v("Для подачи заявки заполните следующие поля")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"education"}},[t._v("Образование")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.education,expression:"education"}],staticClass:"form-control",attrs:{id:"education",type:"text",required:"",placeholder:"Введите свое образование"},domProps:{value:t.education},on:{input:function(e){e.target.composing||(t.education=e.target.value)}}})]),n("div",{staticClass:"form-group mb-3"},[n("label",{attrs:{for:"position"}},[t._v("Желаемая должность")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.positionSelected,expression:"positionSelected"}],staticClass:"browser-default custom-select",attrs:{id:"position"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.positionSelected=e.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[t._v("Выберите желаемую должность")]),t._l(t.positionOptions,(function(e){return n("option",[t._v(" "+t._s(e)+" ")])}))],2)]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.applyForJob()}}},[t._v("Подать заявку")])])},B=[],z={name:"JobApplication",data:function(){return{positionOptions:["Главный пилот","Второй пилот","Стюардесса","Стюард"],education:"",positionSelected:""}},methods:{applyForJob:function(){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={education:t.education,position:t.positionSelected,status:"На рассмотрении"},a=localStorage.getItem("token"),r=localStorage.getItem("id"),console.log(a),fetch("".concat(t.$store.getters.getServerUrl,"/flight/profile/").concat(r,"/"),{method:"PUT",headers:{Authorization:"Token "+a,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){t.clearForm(),alert("Ваша заявка успешно подана!"),t.$router.push({name:"Profile"})}));case 5:case"end":return e.stop()}}),e)})))()},clearForm:function(){this.education="",this.positionSelected=""}}},H=z,M=Object(u["a"])(H,V,B,!1,null,"1aac6ffd",null),W=M.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},t._l(t.appList,(function(e){return n("div",{staticClass:"card mt-4 ml-4",staticStyle:{width:"18rem"}},[n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))]),n("h6",{staticClass:"card-subtitle mb-2 text-muted"},[t._v("Возраст: "+t._s(e.age)+" года (лет)")]),n("p",{staticClass:"card-text"},[t._m(0,!0),t._v(" "+t._s(e.education)+" "),n("br"),t._m(1,!0),t._v(" "+t._s(e.position)+" ")])])])})),0)])},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",[n("b",[t._v("Образование:")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("small",[n("b",[t._v("Желаемая должность:")])])}],K={name:"ApplicationList",data:function(){return{appList:[]}},created:function(){this.loadAppList()},methods:{loadAppList:function(){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.$store.getters.getServerUrl,"/flight/profile/job_app/")).then((function(t){return t.json()}));case 2:t.appList=e.sent,console.log(t.appList);case 4:case"end":return e.stop()}}),e)})))()}}},Q=K,X=Object(u["a"])(Q,D,G,!1,null,"65463ab2",null),Y=X.exports,Z={name:"Profile",components:{JobApplication:W,ApplicationList:Y},data:function(){return{isVisible:!1,isFlight:!1}},computed:{profile:function(){return this.$store.state.profile},flights:function(){return this.$store.state.flights}},created:function(){var t=localStorage.getItem("token"),e=localStorage.getItem("id");!t||this.profile&&this.profile.first_name||this.$store.dispatch("loadProfile",{token:t,id:e}),this.loadFlights()},methods:{loadFlights:function(){this.$store.dispatch("getFlights")}}},tt=Z,et=Object(u["a"])(tt,J,q,!1,null,"636fbb0b",null),nt=et.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("h2",{staticClass:"mt-4 mb-3"},[t._v("Регистрация")]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"login"}},[t._v("Логин")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{id:"login",type:"text",required:"",placeholder:"Придумайте логин"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"first_name"}},[t._v("Имя")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.first_name,expression:"first_name"}],staticClass:"form-control",attrs:{id:"first_name",type:"text",required:"",placeholder:"Введите свое имя"},domProps:{value:t.first_name},on:{input:function(e){e.target.composing||(t.first_name=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"last_name"}},[t._v("Фамилия")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.last_name,expression:"last_name"}],staticClass:"form-control",attrs:{id:"last_name",type:"text",required:"",placeholder:"Введите свою фамилию"},domProps:{value:t.last_name},on:{input:function(e){e.target.composing||(t.last_name=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"age"}},[t._v("Возраст")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.age,expression:"age"}],staticClass:"form-control",attrs:{id:"age",type:"text",required:"",placeholder:"Введите свое возраст"},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"passport_number"}},[t._v("Пасспортные данные")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.passport_number,expression:"passport_number"}],staticClass:"form-control",attrs:{id:"passport_number",type:"text",required:"",placeholder:"Введите свои пасспортные данные"},domProps:{value:t.passport_number},on:{input:function(e){e.target.composing||(t.passport_number=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Пароль")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",required:"",placeholder:"Придумайте пароль"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.userRegistration()}}},[t._v("Зарегистрироваться")])])},rt=[],it={name:"Registration",data:function(){return{username:"",password:"",first_name:"",last_name:"",age:"",passport_number:""}},methods:{userRegistration:function(){var t=this;return Object(N["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={username:t.username,password:t.password,first_name:t.first_name,last_name:t.last_name,age:t.age,passport_number:t.passport_number},fetch("".concat(t.$store.getters.getServerUrl,"/flight/accounts/register/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:a=e.sent,localStorage.setItem("id",n.id),console.log(localStorage.getItem("id")),a.response?(alert("Вы успешно зарегистрированы!"),t.clearForm(),t.$router.push({name:"Login"})):(alert("Ууууу-пс! Что-то пошло не так.."),console.log(JSON.stringify(a)));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},clearForm:function(){this.username="",this.password="",this.first_name="",this.last_name="",this.age="",this.passport_number=""}}},st=it,ot=Object(u["a"])(st,at,rt,!1,null,"90dc6e30",null),lt=ot.exports;a["a"].use(h["a"]);var ct=[{path:"/accounts/login",name:"Login",component:T,exact:!0},{path:"/profile",name:"Profile",component:nt,exact:!0},{path:"/accounts/register",name:"Registration",component:lt,exact:!0},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))},exact:!0},{path:"/:id",name:"Single",component:I,props:!0,exact:!0},{path:"/",name:"Home",component:x,exact:!0}],ut=new h["a"]({mode:"history",routes:ct}),pt=ut,dt=(n("4160"),n("b64b"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("5530")),ft=n("2f62");a["a"].use(ft["a"]);var mt=function(t){switch(t){case"withAvailableSeats":return"number_of_seats_available_min";case"withoutTransfer":return"transit_landings";case"airlineCompanies":return"airline_companies"}},vt=new ft["a"].Store({state:{backendUrl:"http://127.0.0.1:8000/api/v1",filters:{},flights:[],airline_companies:[],profile:{}},mutations:{setFilters:function(t,e){t.filters=Object(dt["a"])(Object(dt["a"])({},t.filters),e)},setFlights:function(t,e){t.flights=e},setAirlineCompanies:function(t,e){t.airline_companies=e},setProfile:function(t,e){t.profile=e}},actions:{getAirlineCompanies:function(t){return Object(N["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,e.next=3,fetch("".concat(a.backendUrl,"/flight/airline_company"));case 3:return r=e.sent,e.t0=n,e.next=7,r.json();case 7:e.t1=e.sent,(0,e.t0)("setAirlineCompanies",e.t1);case 9:case"end":return e.stop()}}),e)})))()},getFlights:function(t,e){return Object(N["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.commit,r=t.state,a("setFilters",e),i=new FormData,Object.keys(e||{}).forEach((function(t){return i.append(mt(t),e[t])})),s=new URLSearchParams(i).toString(),n.next=7,fetch("".concat(r.backendUrl,"/flight/?").concat(s));case 7:return o=n.sent,n.t0=a,n.next=11,o.json();case 11:n.t1=n.sent,(0,n.t0)("setFlights",n.t1);case 13:case"end":return n.stop()}}),n)})))()},loadProfile:function(t,e){var n=t.commit,a=t.state,r=e.token,i=e.id;return new Promise((function(t,e){j.a.ajax({url:"".concat(a.backendUrl,"/flight/profile/").concat(i,"/"),type:"GET",headers:{Authorization:"Token "+r},success:function(e){n("setProfile",e),t()},error:function(t){e(t)}})}))}},modules:{},getters:{getServerUrl:function(t){return t.backendUrl}}}),_t=vt;a["a"].config.productionTip=!1,new a["a"]({router:pt,store:_t,render:function(t){return t(_)}}).$mount("#app")},9708:function(t,e,n){"use strict";var a=n("045a"),r=n.n(a);r.a},cb8d:function(t,e,n){},d0de:function(t,e,n){},f02b:function(t,e,n){t.exports=n.p+"img/account.2c6e94aa.png"}});
//# sourceMappingURL=app.2b1461b2.js.map